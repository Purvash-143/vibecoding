apiVersion: apps/v1
kind: Deployment
metadata:
  name: insurance-app-deployment
  namespace: insurance-application
  labels:
    app: insurance-app
    component: frontend
spec:
  replicas: 2
  selector:
    matchLabels:
      app: insurance-app
  template:
    metadata:
      labels:
        app: insurance-app
        component: frontend
    spec:
      imagePullSecrets:
      - name: ecr-secret
      initContainers:
      - name: db-migration
        image: node:20-alpine
        command: ["/bin/sh"]
        args:
          - -c
          - |
            echo "Insurance App Init Container"
            echo "Database migration simulation..."
            echo "Migration completed successfully"
            sleep 2
      containers:
      - name: insurance-app
        image: node:20-alpine
        workingDir: /app
        command: ["/bin/sh"]
        args:
          - -c
          - |
            echo "Starting Insurance Application UI..."
            
            # Install basic tools
            apk add --no-cache curl
            
            # Create a simplified Insurance App with your UI structure
            cat > package.json << 'EOF'
            {
              "name": "insurance-app",
              "version": "1.0.0",
              "scripts": {
                "start": "node server.js"
              },
              "dependencies": {
                "express": "^4.18.2"
              }
            }
            EOF
            
            # Create the server with your Insurance App UI
            cat > server.js << 'EOF'
            const express = require('express');
            const path = require('path');
            const app = express();
            const PORT = process.env.PORT || 3000;
            
            // Serve static files
            app.use(express.static('public'));
            app.use(express.json());
            
            // Serve the main Insurance App page
            app.get('/', (req, res) => {
              res.send(`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>MedClaims Pro - Insurance Claims Made Simple</title>
                <script src="https://cdn.tailwindcss.com"></script>
                <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
            </head>
            <body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100">
                <!-- Header -->
                <header class="bg-white/80 backdrop-blur-lg shadow-lg border-b border-gray-200/50 sticky top-0 z-50">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex justify-between items-center py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-xl shadow-lg">
                                    <i class="fas fa-file-medical text-white text-xl"></i>
                                </div>
                                <span class="text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">
                                    MedClaims Pro
                                </span>
                            </div>
                            
                            <div class="flex items-center space-x-3">
                                <button onclick="window.location.href='/signin'" class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200">
                                    Sign In
                                </button>
                                <button onclick="window.location.href='/signup'" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 shadow-lg transition-all duration-200 transform hover:scale-105">
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Hero Section -->
                <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                    <div class="text-center mb-20">
                        <div class="inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium mb-6">
                            <i class="fas fa-star mr-2"></i>
                            Trusted by 10,000+ Healthcare Providers
                        </div>
                        
                        <h1 class="text-6xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent mb-6 leading-tight">
                            Insurance Claims<br>
                            <span class="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                                Made Simple
                            </span>
                        </h1>
                        
                        <p class="text-xl text-gray-600 mb-10 max-w-3xl mx-auto leading-relaxed">
                            A comprehensive solution for patients, doctors, insurance companies, and banks 
                            to manage insurance claims efficiently and transparently with cutting-edge technology.
                        </p>
                        
                        <div class="flex justify-center gap-4 items-center">
                            <button onclick="window.location.href='/signup'" class="px-8 py-4 text-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 shadow-xl transition-all duration-300 transform hover:scale-105">
                                Start Free Trial
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                            <button onclick="window.location.href='/signin'" class="px-8 py-4 text-lg border-2 border-gray-300 text-gray-700 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all duration-300">
                                Sign In
                            </button>
                        </div>
                        
                        <div class="mt-8 text-sm text-gray-500">
                            No credit card required • 14-day free trial • Cancel anytime
                        </div>
                    </div>

                    <!-- Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-20">
                        <div class="text-center p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="mx-auto bg-blue-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6">
                                <i class="fas fa-users text-blue-600 text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-4">Multi-Role Access</h3>
                            <p class="text-gray-600">Separate dashboards for patients, doctors, insurance agents, and bank representatives</p>
                        </div>

                        <div class="text-center p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="mx-auto bg-green-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6">
                                <i class="fas fa-clock text-green-600 text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-4">Real-time Tracking</h3>
                            <p class="text-gray-600">Track claim status in real-time from submission to payment</p>
                        </div>

                        <div class="text-center p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="mx-auto bg-purple-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6">
                                <i class="fas fa-shield-alt text-purple-600 text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-4">Secure & Compliant</h3>
                            <p class="text-gray-600">HIPAA compliant with enterprise-grade security and data protection</p>
                        </div>

                        <div class="text-center p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="mx-auto bg-orange-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6">
                                <i class="fas fa-check-circle text-orange-600 text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-4">Automated Workflow</h3>
                            <p class="text-gray-600">Streamlined approval process with automated notifications and updates</p>
                        </div>
                    </div>

                    <!-- User Roles Section -->
                    <div class="mb-20">
                        <div class="text-center mb-16">
                            <h2 class="text-4xl font-bold mb-6">Built for Every Stakeholder</h2>
                            <p class="text-xl text-gray-600 max-w-2xl mx-auto">Tailored experiences for each role in the insurance ecosystem</p>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                            <div class="text-center p-8 bg-white rounded-2xl shadow-lg">
                                <div class="mb-6">
                                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold">
                                        <i class="fas fa-user mr-2"></i>Patient
                                    </span>
                                </div>
                                <h3 class="text-xl font-bold mb-4">Patients</h3>
                                <ul class="text-gray-600 space-y-3 text-left">
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Submit claims easily</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Upload medical documents</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Track claim status</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Receive notifications</li>
                                </ul>
                            </div>

                            <div class="text-center p-8 bg-white rounded-2xl shadow-lg">
                                <div class="mb-6">
                                    <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold">
                                        <i class="fas fa-user-md mr-2"></i>Doctor
                                    </span>
                                </div>
                                <h3 class="text-xl font-bold mb-4">Doctors</h3>
                                <ul class="text-gray-600 space-y-3 text-left">
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Review patient claims</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Add medical notes</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Upload supporting docs</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Approve treatments</li>
                                </ul>
                            </div>

                            <div class="text-center p-8 bg-white rounded-2xl shadow-lg">
                                <div class="mb-6">
                                    <span class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-semibold">
                                        <i class="fas fa-shield-alt mr-2"></i>Insurance
                                    </span>
                                </div>
                                <h3 class="text-xl font-bold mb-4">Insurance</h3>
                                <ul class="text-gray-600 space-y-3 text-left">
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Review submitted claims</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Approve/reject claims</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Set approved amounts</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Manage policies</li>
                                </ul>
                            </div>

                            <div class="text-center p-8 bg-white rounded-2xl shadow-lg">
                                <div class="mb-6">
                                    <span class="bg-orange-100 text-orange-800 px-4 py-2 rounded-full text-sm font-semibold">
                                        <i class="fas fa-university mr-2"></i>Bank
                                    </span>
                                </div>
                                <h3 class="text-xl font-bold mb-4">Banks</h3>
                                <ul class="text-gray-600 space-y-3 text-left">
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Process payments</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Verify approved claims</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Track transactions</li>
                                    <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Generate reports</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- CTA Section -->
                    <div class="text-center bg-gradient-to-br from-white via-blue-50/50 to-indigo-50/50 rounded-3xl shadow-2xl p-16">
                        <h2 class="text-5xl font-bold mb-6">Ready to streamline your claims process?</h2>
                        <p class="text-xl text-gray-600 mb-10">Join thousands of healthcare providers and patients using our platform</p>
                        
                        <div class="flex justify-center gap-4 mb-8">
                            <button onclick="window.location.href='/signup'" class="px-10 py-4 text-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 shadow-xl transition-all duration-300 transform hover:scale-105">
                                Get Started Now
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                            <button onclick="window.location.href='/signin'" class="px-10 py-4 text-lg border-2 border-gray-300 text-gray-700 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all duration-300">
                                I Have an Account
                            </button>
                        </div>
                        
                        <div class="flex justify-center gap-8 text-sm text-gray-500">
                            <div class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Free 14-day trial
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                No setup fees
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Cancel anytime
                            </div>
                        </div>
                    </div>
                </main>
            </body>
            </html>
              `);
            });
            
            // Sign In Page
            app.get('/signin', (req, res) => {
              res.send(`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Sign In - MedClaims Pro</title>
                <script src="https://cdn.tailwindcss.com"></script>
                <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
            </head>
            <body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4">
                <div class="max-w-md w-full">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center space-x-3 mb-4">
                            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-xl shadow-lg">
                                <i class="fas fa-file-medical text-white text-xl"></i>
                            </div>
                            <span class="text-2xl font-bold">MedClaims Pro</span>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Welcome back</h1>
                        <p class="text-gray-600">Sign in to access your dashboard</p>
                    </div>

                    <div class="bg-white rounded-2xl shadow-xl p-8">
                        <form onsubmit="handleSignIn(event)">
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input id="email" type="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter your email">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                    <input id="password" type="password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter your password">
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <input type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <label class="ml-2 block text-sm text-gray-700">Remember me</label>
                                    </div>
                                    <a href="#" class="text-sm text-blue-600 hover:text-blue-500">Forgot password?</a>
                                </div>
                                
                                <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium">
                                    Sign In
                                </button>
                            </div>
                        </form>
                        
                        <div class="mt-6 text-center">
                            <p class="text-gray-600">Don't have an account? 
                                <a href="/signup" class="text-blue-600 hover:text-blue-500 font-medium">Sign up</a>
                            </p>
                        </div>
                        
                        <!-- Demo Credentials -->
                        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                            <p class="text-sm text-gray-600 mb-2"><strong>Demo Credentials:</strong></p>
                            <p class="text-sm text-gray-500">Email: demo@medclaims.com</p>
                            <p class="text-sm text-gray-500">Password: demo123</p>
                            <button onclick="fillDemoCredentials()" class="mt-2 text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded">Use Demo Credentials</button>
                        </div>
                    </div>
                </div>

                <script>
                function fillDemoCredentials() {
                    document.getElementById('email').value = 'demo@medclaims.com';
                    document.getElementById('password').value = 'demo123';
                }
                
                function handleSignIn(event) {
                    event.preventDefault();
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    // Simple validation for demo
                    if (email === 'demo@medclaims.com' && password === 'demo123') {
                        localStorage.setItem('user', JSON.stringify({email: email, name: 'Demo User'}));
                        window.location.href = '/dashboard';
                    } else if (email && password) {
                        // Allow any valid email/password for demo
                        localStorage.setItem('user', JSON.stringify({email: email, name: 'User'}));
                        window.location.href = '/dashboard';
                    } else {
                        alert('Please enter valid credentials');
                    }
                }
                </script>
            </body>
            </html>
              `);
            });
            
            // Dashboard Page
            app.get('/dashboard', (req, res) => {
              res.send(`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Dashboard - MedClaims Pro</title>
                <script src="https://cdn.tailwindcss.com"></script>
                <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
            </head>
            <body class="bg-gray-50">
                <!-- Header -->
                <header class="bg-white shadow-sm border-b">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex justify-between items-center py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-xl">
                                    <i class="fas fa-file-medical text-white"></i>
                                </div>
                                <span class="text-xl font-bold">MedClaims Pro</span>
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <span class="text-gray-700">Welcome, User</span>
                                <button onclick="window.location.href='/'" class="text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-sign-out-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </header>

                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Dashboard Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-blue-100 rounded-lg">
                                    <i class="fas fa-file-alt text-blue-600 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Claims</p>
                                    <p class="text-2xl font-semibold text-gray-900">24</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 rounded-lg">
                                    <i class="fas fa-check-circle text-green-600 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Approved</p>
                                    <p class="text-2xl font-semibold text-gray-900">18</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-yellow-100 rounded-lg">
                                    <i class="fas fa-clock text-yellow-600 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Pending</p>
                                    <p class="text-2xl font-semibold text-gray-900">4</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-purple-100 rounded-lg">
                                    <i class="fas fa-dollar-sign text-purple-600 text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Amount</p>
                                    <p class="text-2xl font-semibold text-gray-900">$12,450</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Claims -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Recent Claims</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Claim ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Treatment</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#CLM-001</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">John Doe</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Dental Checkup</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$150</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Approved</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-08-20</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#CLM-002</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Jane Smith</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Eye Exam</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$200</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-08-19</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#CLM-003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mike Johnson</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Physical Therapy</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$300</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Approved</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-08-18</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </body>
            </html>
              `);
            });
            
            // API endpoints
            app.get('/api/health', (req, res) => {
              res.json({
                status: 'ok',
                service: 'insurance-app',
                uptime: process.uptime(),
                timestamp: new Date().toISOString()
              });
            });
            
            app.get('/api/status', (req, res) => {
              res.json({
                status: 'healthy',
                database: 'connected',
                services: {
                  auth: 'active',
                  claims: 'active',
                  payments: 'active'
                }
              });
            });
            
            app.listen(PORT, '0.0.0.0', () => {
              console.log(`Insurance Application with UI running on port ${PORT}`);
            });
            EOF
            
            npm install express
            node server.js
        ports:
        - containerPort: 3000
        env:
        - name: PORT
          value: "3000"
        - name: HOSTNAME
          value: "0.0.0.0"
        envFrom:
        - configMapRef:
            name: insurance-app-config
        - secretRef:
            name: insurance-app-secrets
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /api/health
            port: 3000
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /api/health
            port: 3000
          initialDelaySeconds: 10
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 3
      restartPolicy: Always
      tolerations:
      - key: "CriticalAddonsOnly"
        operator: "Exists"
        effect: "NoSchedule"
